{% extends "base.html" %}

{% block content %}
<a href="{% url 'tracker:tasks' %}">task list</a>
<h3 class="mt-3 text-center">{{task.name}}</h3>

<div class="card">
    <div class="row">
        <div class="col text-center">
            focused for
        </div>
        <div class="col text-center">
            sessions
        </div>
    </div>
    <div class="row">
        <div class="col text-center">
            <strong>
                {{task.total_time_spent_dict.hours|stringformat:"02d"}}:{{task.total_time_spent_dict.minutes|stringformat:"02d"}}
            </strong>
        </div>
        <div class="col text-center">
            <strong>
                {{session_count}}
            </strong>
        </div>
    </div>

    <span><strong>Project:</strong> {{ task.project.name }}</span>
    <span><strong>Status:</strong> {% if task.is_done %}Done{% else %}In Progress{% endif %}</span>
</div>
<div>
    <a href="{% url 'tracker:task-update' pk=task.pk%}">edit task</a>
    <a href="{% url 'tracker:task-delete' pk=task.pk%}">delete task</a>
    <a class="btn btn-primary" href="{% url 'tracker:session-start' pk=task.pk %}">focus</a>
</div>

<h3 class="mt-3">Sessions</h3>
<div class="card">
    <ul class="list-group list-group-flush">
    {% for session in sessions %}
    <li class="list-group-item">
        <strong>
            {{session.duration_dict.hours|stringformat:"02d"}}:{{session.duration_dict.minutes|stringformat:"02d"}}
        </strong>
        <span>
            - {{ session.start_time|timesince }} ago.
        </span>
    </li>
    {% empty %}
    <li class="list-group-item">No sessions yet.</li>
    {% endfor %}
    </ul>
</div>


{% endblock %}